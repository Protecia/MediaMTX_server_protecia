services:
  mediamtx:
    build:
      context: .
      dockerfile: Dockerfile
#    image: bluenviron/mediamtx:latest
    container_name: mediamtx
    environment:
      - MTX_RTSPTRANSPORTS=tcp
      - MTX_WEBRTCADDITIONALHOSTS=<public ip adress>>
      - MEDIA_MTX_API_PASS=${MTX_ADMIN_PASS}
    ports:
      - "8554:8554"       # RTSP
      - "1935:1935"       # RTMP
      - "8888:8888"       # HTTP (HLS, API, etc.)
      - "8889:8889"       # HTTPS (HLS, API, etc.)
      - "8890:8890/udp"   # WebRTC (UDP)
      - "8189:8189/udp"   # SRT (UDP)
      - "9997:9997"
    volumes:
      - ./mediamtx.yaml:/etc/mediamtx.yml
#    restart: unless-stopped
